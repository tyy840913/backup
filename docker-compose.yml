services:
  # Portainer - Docker 可视化管理（添加加速器）
  portainer:
    image: cdn.luxxk.dpdns.org/portainer/portainer-ce:latest
    # 或者使用其他两个：
    # image: cdn.woskee.dpdns.org/portainer/portainer-ce:latest
    # image: cdn.woskee.nyc.mn/portainer/portainer-ce:latest
    container_name: portainer
    restart: always
    network_mode: bridge
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "9100:9000"

  # openlist - 文件列表服务（添加加速器）
  openlist:
    image: cdn.luxxk.dpdns.org/openlistteam/openlist:latest
    # image: cdn.woskee.dpdns.org/openlistteam/openlist:latest
    # image: cdn.woskee.nyc.mn/openlistteam/openlist:latest
    container_name: openlist
    restart: always
    network_mode: bridge
    user: "1001:1001"
    volumes:
      - /docker_data/openlist:/opt/openlist/data
    ports:
      - "5244:5244"
    environment:
      - TZ=Asia/Shanghai
      - UMASK=022

  # Lucky - 反向代理工具（添加加速器）
  lucky:
    image: cdn.luxxk.dpdns.org/gdy666/lucky:latest
    # image: cdn.woskee.dpdns.org/gdy666/lucky:latest
    # image: cdn.woskee.nyc.mn/gdy666/lucky:latest
    container_name: lucky
    restart: always
    network_mode: host
    volumes:
      - /docker_data/luckyconf:/goodluck
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - TZ=Asia/Shanghai

  # Vaultwarden - 密码管理服务（添加加速器）
  vaultwarden:
    image: cdn.luxxk.dpdns.org/vaultwarden/server:latest
    # image: cdn.woskee.dpdns.org/vaultwarden/server:latest
    # image: cdn.woskee.nyc.mn/vaultwarden/server:latest
    container_name: vaultwarden
    restart: always
    network_mode: bridge
    volumes:
      - /docker_data/bitwarden:/data
    ports:
      - 8081:80
    environment:
      - TZ=Asia/Shanghai
      - WEB_VAULT_ENABLED=true
      - SIGNUPS_ALLOWED=true
   
  # Watchtower - 自动更新容器（添加加速器）
  watchtower:
    image: cdn.luxxk.dpdns.org/containrrr/watchtower:latest
    # image: cdn.woskee.dpdns.org/containrrr/watchtower:latest
    # image: cdn.woskee.nyc.mn/containrrr/watchtower:latest
    container_name: watchtower
    restart: always
    network_mode: host
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - TZ=Asia/Shanghai
    command: --schedule "0 30 5 * * *" --cleanup --remove-volumes

  # subs-check 代理池（已经使用镜像加速器，保持不变）
  subs-check:
    image: ghcr.nju.edu.cn/beck-8/subs-check:latest
    container_name: subs-check
    volumes:
      - /docker_data/subs:/app/config
      - /opt/subs:/app/output
    ports:
      - "8199:8199"
      - "8299:8299"
    environment:
      - TZ=Asia/Shanghai
      - API_KEY=421121
    restart: always
    tty: true
    network_mode: host
